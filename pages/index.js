import Head from 'next/head';
import Image from 'next/image';
import styles from '../styles/Home.module.css';
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import Link from 'next/link';

export default function Home({ posts }) {
    return (
        <div>
            <Head>
                <title>Cassady Campos Software</title>
                <meta
                    name="description"
                    content="Generated by create next app"
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>

            <main className="mt-4">
                <div
                    id="home"
                    className="d-flex flex-column text-left justify-content-center"
                    style={{ height: 'calc(100vh - 100px)' }}
                >
                    <div className={styles.baseText + ' text-center'}>
                        In love with all things tech and software! Have a look
                        around, check out one of my projects or read one of my
                        posts!
                    </div>
                </div>
            </main>

            <footer class="bg-light text-center text-lg-start">
                {/* <!-- Copyright --> */}
                <div className={styles.baseFont + ' text-center p-3'}>
                    Â© 2020 Copyright:
                    <a className="text-dark" href="h#">
                        Cassady
                    </a>
                </div>
                {/* <!-- Copyright --> */}
            </footer>
        </div>
    );
}

export const getStaticProps = async () => {
    const files = fs.readdirSync(path.join('posts'));
    const posts = files.map((filename) => {
        const markdownWithMeta = fs.readFileSync(
            path.join('posts', filename),
            'utf-8'
        );
        const { data: frontMatter } = matter(markdownWithMeta);
        return {
            frontMatter,
            slug: filename.split('.')[0],
        };
    });

    return {
        props: {
            posts,
        },
    };
};
